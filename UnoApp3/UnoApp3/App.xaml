<Application x:Class="UnoApp3.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:utum="using:Uno.Toolkit.UI.Material"
             xmlns:converters="clr-namespace:UnoApp3.Helpers.Converters">

    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <!-- Load WinUI resources -->
                <XamlControlsResources xmlns="using:Microsoft.UI.Xaml.Controls" />
                <utum:MaterialToolkitTheme
                    ColorOverrideSource="ms-appx:///Styles/ColorPaletteOverride.xaml">
                    <!-- NOTE: You can override the default Roboto font by providing your font assets here. -->
                    <!-- <utum:MaterialToolkitTheme.FontOverrideDictionary>
            <ResourceDictionary>
              <FontFamily x:Key="MaterialLightFontFamily">ms-appx:///Uno.Fonts.Roboto/Fonts/Roboto-Light.ttf#Roboto</FontFamily>
              <FontFamily x:Key="MaterialMediumFontFamily">ms-appx:///Uno.Fonts.Roboto/Fonts/Roboto-Medium.ttf#Roboto</FontFamily>
              <FontFamily x:Key="MaterialRegularFontFamily">ms-appx:///Uno.Fonts.Roboto/Fonts/Roboto-Regular.ttf#Roboto</FontFamily>
            </ResourceDictionary>
          </utum:MaterialToolkitTheme.FontOverrideDictionary> -->
                </utum:MaterialToolkitTheme>
            </ResourceDictionary.MergedDictionaries>

            <!-- Add resources here -->
            <!-- Cart Item Template -->
            <DataTemplate x:Key="CartItemTemplate">
                <Grid Padding="12"
                      Background="Transparent">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!-- Product Image -->
                    <Border Width="60"
                            Height="60"
                            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            CornerRadius="8">
                        <Image Source="{Binding ProductId, Converter={StaticResource ProductImageUrlConverter}}"
                               Stretch="UniformToFill" />
                    </Border>

                    <!-- Product Details -->
                    <StackPanel Grid.Column="1"
                                Margin="12,0,12,0"
                                VerticalAlignment="Center">
                        <TextBlock Text="{Binding ProductName}"
                                   Style="{StaticResource BodyTextBlockStyle}"
                                   FontWeight="SemiBold" />
                        <TextBlock Text="{Binding Price, StringFormat='{}{0:C}'}"
                                   Style="{StaticResource CaptionTextBlockStyle}" />
                        <TextBlock Text="{Binding Subtotal, StringFormat='Tá»•ng: {0:C}'}"
                                   Style="{StaticResource CaptionTextBlockStyle}" />
                    </StackPanel>

                    <!-- Quantity Controls -->
                    <Grid Grid.Column="2"
                          VerticalAlignment="Center">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="30" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <!-- Decrease Button -->
                        <Button Grid.Column="0"
                                Command="{Binding ElementName=PageRoot, Path=DataContext.DecreaseQuantityCommand}"
                                CommandParameter="{Binding}">
                            <SymbolIcon Symbol="Remove" />
                        </Button>

                        <!-- Quantity Display -->
                        <TextBlock Grid.Column="1"
                                   Text="{Binding Quantity}"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Center"
                                   Style="{StaticResource BodyTextBlockStyle}" />

                        <!-- Increase Button -->
                        <Button Grid.Column="2"
                                Command="{Binding ElementName=PageRoot, Path=DataContext.IncreaseQuantityCommand}"
                                CommandParameter="{Binding}">
                            <SymbolIcon Symbol="Add" />
                        </Button>

                        <!-- Remove Button -->
                        <Button Grid.Column="3"
                                Command="{Binding ElementName=PageRoot, Path=DataContext.RemoveItemCommand}"
                                CommandParameter="{Binding}"
                                Margin="12,0,0,0">
                            <SymbolIcon Symbol="Delete" />
                        </Button>
                    </Grid>
                </Grid>
            </DataTemplate>

            <converters:InverseBoolConverter x:Key="InverseBoolConverter" />
            <!-- Boolean to Visibility Converter -->
            <converters:BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
            <converters:InverseBoolToVisibilityConverter x:Key="InverseBoolToVisibilityConverter"/>

        </ResourceDictionary>
    </Application.Resources>

</Application>
